<ul>
    <Virtualize Items="servers" Context="server">
        <ServerComponent Server="server" OnServerDeleted="RefreshServerList"/>
    </Virtualize>
</ul>

@code {
    private List<Server> servers = new();

    [Parameter]
    public string? SelectedCity { get; set; }

    [Parameter]
    public string? ServerFilter { get; set; }

    protected override void OnParametersSet()
    {
        RefreshServerList();
    }

    private void RefreshServerList() 
    {
        // it could be ternary (it was) but it's more readable

        if (!string.IsNullOrEmpty(ServerFilter))
        {
            servers = ServersRepository.FindByName(ServerFilter);
            return;
        }

        if (!string.IsNullOrEmpty(SelectedCity))
        {
            servers = ServersRepository.FindByCity(SelectedCity);
            return;
        }

        servers = ServersRepository.FindAll();
    }

    private void DeleteServer(int serverId)
    {
        ServersRepository.Delete(serverId);
        RefreshServerList();
    }
}